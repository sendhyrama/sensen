import{p as te,_ as ne}from"./chunks/hooks.module.0d1b6206.js";import{o as p}from"./chunks/jsxRuntime.module.48de9b32.js";import"./chunks/preact.module.e0e02349.js";var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},le={exports:{}};(function(F){((P,k)=>{F.exports?F.exports=k():P.fuzzysort=k()})(oe,P=>{var k=(n,e)=>{if(n=="farzher")return{target:"farzher was here (^-^*)/",score:0,_indexes:[0]};if(!n||!e)return c;var a=q(n);b(e)||(e=y(e));var i=a.bitflags;return(i&e._bitflags)!==i?c:j(a,e)},V=(n,e,a)=>{if(n=="farzher")return[{target:"farzher was here (^-^*)/",score:0,_indexes:[0],obj:e?e[0]:c}];if(!n)return a&&a.all?O(n,e,a):R;var i=q(n),t=i.bitflags;i.containsSpace;var s=a&&a.threshold||C,l=a&&a.limit||K,r=0,v=0,f=e.length;if(a&&a.key)for(var o=a.key,u=0;u<f;++u){var h=e[u],g=H(h,o);if(!!g&&(b(g)||(g=y(g)),(t&g._bitflags)===t)){var x=j(i,g);x!==c&&(x.score<s||(x={target:x.target,_targetLower:"",_targetLowerCodes:c,_nextBeginningIndexes:c,_bitflags:0,score:x.score,_indexes:x._indexes,obj:h},r<l?(L.add(x),++r):(++v,x.score>L.peek().score&&L.replaceTop(x))))}}else if(a&&a.keys)for(var A=a.scoreFn||J,Q=a.keys,U=Q.length,u=0;u<f;++u){for(var h=e[u],w=new Array(U),S=0;S<U;++S){var o=Q[S],g=H(h,o);if(!g){w[S]=c;continue}b(g)||(g=y(g)),(t&g._bitflags)!==t?w[S]=c:w[S]=j(i,g)}w.obj=h;var d=A(w);d!==c&&(d<s||(w.score=d,r<l?(L.add(w),++r):(++v,d>L.peek().score&&L.replaceTop(w))))}else for(var u=0;u<f;++u){var g=e[u];if(!!g&&(b(g)||(g=y(g)),(t&g._bitflags)===t)){var x=j(i,g);x!==c&&(x.score<s||(r<l?(L.add(x),++r):(++v,x.score>L.peek().score&&L.replaceTop(x))))}}if(r===0)return R;for(var E=new Array(r),u=r-1;u>=0;--u)E[u]=L.poll();return E.total=r+v,E},W=(n,e,a)=>{if(typeof e=="function")return $(n,e);if(n===c)return c;e===void 0&&(e="<b>"),a===void 0&&(a="</b>");var i="",t=0,s=!1,l=n.target,r=l.length,v=n._indexes;v=v.slice(0,v.len).sort((u,h)=>u-h);for(var f=0;f<r;++f){var o=l[f];if(v[t]===f){if(++t,s||(s=!0,i+=e),t===v.length){i+=o+a+l.substr(f+1);break}}else s&&(s=!1,i+=a);i+=o}return i},$=(f,e)=>{if(f===c)return c;var a=f.target,i=a.length,t=f._indexes;t=t.slice(0,t.len).sort((h,g)=>h-g);for(var s="",l=0,r=0,v=!1,f=[],o=0;o<i;++o){var u=a[o];if(t[r]===o){if(++r,v||(v=!0,f.push(s),s=""),r===t.length){s+=u,f.push(e(s,l++)),s="",f.push(a.substr(o+1));break}}else v&&(v=!1,f.push(e(s,l++)),s="");s+=u}return f},T=n=>n._indexes.slice(0,n._indexes.len).sort((e,a)=>e-a),B=n=>{typeof n!="string"&&(n="");var e=N(n);return{target:n,_targetLower:e._lower,_targetLowerCodes:e.lowerCodes,_nextBeginningIndexes:c,_bitflags:e.bitflags,score:c,_indexes:[0],obj:c}},X=n=>{typeof n!="string"&&(n=""),n=n.trim();var e=N(n),a=[];if(e.containsSpace){var i=n.split(/\s+/);i=[...new Set(i)];for(var t=0;t<i.length;t++)if(i[t]!==""){var s=N(i[t]);a.push({lowerCodes:s.lowerCodes,_lower:i[t].toLowerCase(),containsSpace:!1})}}return{lowerCodes:e.lowerCodes,bitflags:e.bitflags,containsSpace:e.containsSpace,_lower:e._lower,spaceSearches:a}},y=n=>{if(n.length>999)return B(n);var e=G.get(n);return e!==void 0||(e=B(n),G.set(n,e)),e},q=n=>{if(n.length>999)return X(n);var e=D.get(n);return e!==void 0||(e=X(n),D.set(n,e)),e},O=(n,e,a)=>{var i=[];i.total=e.length;var t=a&&a.limit||K;if(a&&a.key)for(var s=0;s<e.length;s++){var l=e[s],r=H(l,a.key);if(!!r){b(r)||(r=y(r)),r.score=C,r._indexes.len=0;var v=r;if(v={target:v.target,_targetLower:"",_targetLowerCodes:c,_nextBeginningIndexes:c,_bitflags:0,score:r.score,_indexes:c,obj:l},i.push(v),i.length>=t)return i}}else if(a&&a.keys)for(var s=0;s<e.length;s++){for(var l=e[s],f=new Array(a.keys.length),o=a.keys.length-1;o>=0;--o){var r=H(l,a.keys[o]);if(!r){f[o]=c;continue}b(r)||(r=y(r)),r.score=C,r._indexes.len=0,f[o]=r}if(f.obj=l,f.score=C,i.push(f),i.length>=t)return i}else for(var s=0;s<e.length;s++){var r=e[s];if(!!r&&(b(r)||(r=y(r)),r.score=C,r._indexes.len=0,i.push(r),i.length>=t))return i}return i},j=(n,e,a=!1)=>{if(a===!1&&n.containsSpace)return m(n,e);for(var i=n._lower,t=n.lowerCodes,s=t[0],l=e._targetLowerCodes,r=t.length,v=l.length,h=0,f=0,o=0;;){var u=s===l[f];if(u){if(z[o++]=f,++h,h===r)break;s=t[h]}if(++f,f>=v)return c}var h=0,g=!1,x=0,A=e._nextBeginningIndexes;A===c&&(A=e._nextBeginningIndexes=Z(e.target)),f=z[0]===0?0:A[z[0]-1];var Q=0;if(f!==v)for(;;)if(f>=v){if(h<=0||(++Q,Q>200))break;--h;var U=_[--x];f=A[U]}else{var u=t[h]===l[f];if(u){if(_[x++]=f,++h,h===r){g=!0;break}++f}else f=A[f]}var w=e._targetLower.indexOf(i,z[0]),S=~w;if(S&&!g)for(var d=0;d<o;++d)z[d]=w+d;var E=!1;S&&(E=e._nextBeginningIndexes[w-1]===w);{if(g)var I=_,ee=x;else var I=z,ee=o;for(var M=0,ie=0,d=1;d<r;++d)I[d]-I[d-1]!==1&&(M-=I[d],++ie);var ve=I[r-1]-I[0]-(r-1);if(M-=(12+ve)*ie,I[0]!==0&&(M-=I[0]*I[0]*.2),!g)M*=1e3;else{for(var re=1,d=A[0];d<v;d=A[d])++re;re>24&&(M*=(re-24)*10)}S&&(M/=1+r*r*1),E&&(M/=1+r*r*1),M-=v-r,e.score=M;for(var d=0;d<ee;++d)e._indexes[d]=I[d];return e._indexes.len=ee,e}},m=(n,e)=>{for(var a=new Set,i=0,t=c,s=0,l=n.spaceSearches,o=0;o<l.length;++o){var r=l[o];if(t=j(r,e),t===c)return c;i+=t.score,t._indexes[0]<s&&(i-=s-t._indexes[0]),s=t._indexes[0];for(var v=0;v<t._indexes.len;++v)a.add(t._indexes[v])}var f=j(n,e,!0);if(f!==c&&f.score>i)return f;t.score=i;var o=0;for(let u of a)t._indexes[o++]=u;return t._indexes.len=o,t},N=n=>{for(var e=n.length,a=n.toLowerCase(),i=[],t=0,s=!1,l=0;l<e;++l){var r=i[l]=a.charCodeAt(l);if(r===32){s=!0;continue}var v=r>=97&&r<=122?r-97:r>=48&&r<=57?26:r<=127?30:31;t|=1<<v}return{lowerCodes:i,bitflags:t,containsSpace:s,_lower:a}},Y=n=>{for(var e=n.length,a=[],i=0,t=!1,s=!1,l=0;l<e;++l){var r=n.charCodeAt(l),v=r>=65&&r<=90,f=v||r>=97&&r<=122||r>=48&&r<=57,o=v&&!t||!s||!f;t=v,s=f,o&&(a[i++]=l)}return a},Z=n=>{for(var e=n.length,a=Y(n),i=[],t=a[0],s=0,l=0;l<e;++l)t>l?i[l]=t:(t=a[++s],i[l]=t===void 0?e:t);return i},ae=()=>{G.clear(),D.clear(),z=[],_=[]},G=new Map,D=new Map,z=[],_=[],J=n=>{for(var e=C,a=n.length,i=0;i<a;++i){var t=n[i];if(t!==c){var s=t.score;s>e&&(e=s)}}return e===C?c:e},H=(n,e)=>{var a=n[e];if(a!==void 0)return a;var i=e;Array.isArray(e)||(i=e.split("."));for(var t=i.length,s=-1;n&&++s<t;)n=n[i[s]];return n},b=n=>typeof n=="object",K=1/0,C=-K,R=[];R.total=0;var c=null,fe=n=>{var e=[],a=0,i={},t=s=>{for(var l=0,r=e[l],v=1;v<a;){var f=v+1;l=v,f<a&&e[f].score<e[v].score&&(l=f),e[l-1>>1]=e[l],v=1+(l<<1)}for(var o=l-1>>1;l>0&&r.score<e[o].score;o=(l=o)-1>>1)e[l]=e[o];e[l]=r};return i.add=s=>{var l=a;e[a++]=s;for(var r=l-1>>1;l>0&&s.score<e[r].score;r=(l=r)-1>>1)e[l]=e[r];e[l]=s},i.poll=s=>{if(a!==0){var l=e[0];return e[0]=e[--a],t(),l}},i.peek=s=>{if(a!==0)return e[0]},i.replaceTop=s=>{e[0]=s,t()},i},L=fe();return{single:k,go:V,highlight:W,prepare:B,indexes:T,cleanup:ae}})})(le);const se=le.exports;function ce(F){const{url:P,title:k,description:V,created:W,thumbnail:$,tags:T}=F;return p("div",{class:"my-6 py-2 flex gap-6 justify-between w-full",children:[p("div",{class:"flex flex-col",children:[p("p",{class:"mt-0 text-xs sm:text-sm",children:W}),p("a",{class:"decoration-none",href:P,target:"_self",children:p("h1",{class:"my-0 text-lg sm:text-xl",dangerouslySetInnerHTML:{__html:k}})}),p("p",{class:"mt-2 text-sm sm:text-base",dangerouslySetInnerHTML:{__html:V}}),p("div",{class:"my-0 flex flex-wrap gap-x-4 text-sm",dangerouslySetInnerHTML:{__html:T}})]}),$&&p("img",{class:"my-auto aspect-square object-cover w-[25%]",src:"/assets/post/"+$,alt:k+" thumbnail image",draggable:!1,width:"25%",height:"100%"})]})}function he({main:F}){const[P,k]=te(!1),[V,W]=te([]),$=ne(null),T=ne(!1),B=ne(null),X=document.getElementById(F),y=m=>{k(m),m?X.style.display="none":X.style.display=""},q=m=>m?se.highlight(m,N=>`<mark>${N}</mark>`).join(""):null;async function O(){if(!(T.current||B.current)){T.current=!0;try{const m=await fetch("/posts.json");B.current=await m.json(),T.current=!1}catch{T.current=!1}}}function j(m){if(T.current||!B.current)return;const N=m.target,Y=N.value.replace("#","");if(!Y.length)return y(!1);const Z=N.value.startsWith("#"),G={limit:20,threshold:-1e4,keys:Z?["tags"]:["title","description"]},D=se.go(Y,B.current,G);y(D.length+" results found");const z=D.map(_=>{let J=_.obj.title,H=_.obj.description,b=_.obj.tags;Z?b=q(_[0])??b:(J=q(_[0])??J,H=q(_[1])??H);const K=b.split(",").map(C=>`<span>#${C}</span>`).join("");return{title:J,description:H,language:_.obj.language,thumbnail:_.obj.thumbnail,created:_.obj.created,tags:K,url:_.obj.url}});W(z)}return p("section",{children:[p("div",{class:"background flex gap-2 sticky top-10 pt-2 sm:pt-4 pb-2 -mt-4",children:[p("span",{class:"my-0",children:"["}),p("input",{class:"bg-transparent outline-0 flex-grow py-2 -my-2 min-w-[0]",type:"text",placeholder:"search posts | # for tags",spellcheck:!1,onFocus:O,onInput:j}),p("span",{class:"my-0",children:"]"}),P&&p("small",{class:"my-auto whitespace-nowrap",children:P})]}),P&&p("div",{ref:$,children:V.map(m=>p(ce,{...m}))})]})}export{he as default};
